<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            
            margin: 20px 0;
            font-size: 18px;
            text-align: left;
        }

        th, td {
            border-radius: 4px;
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #4ca8af;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #ddd;
        }

        button {
            background-color: #20962f;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }

        button:hover {
            background-color: #d32f2f;
        }
    </style>
</head>
<body>
    <header>
        <%- include('partials/header') %>
    </header>

    <h1>Músicas</h1>

    <table border="2">
        <tr> 
            <th bgcolor="#aac1e1">ID</th> 
            <th bgcolor="#aac1e1">Titulo</th> 
            <th bgcolor="#aac1e1">Artista</th>
            <th bgcolor="#aac1e1">Album</th>
            <th bgcolor="#aac1e1">Género</th>
            <th bgcolor="#aac1e1">Duração (sec)</th>
            <th bgcolor="#aac1e1">Likes</th>
            <th bgcolor="#aac1e1">Data de Lançamento</th>
            <th bgcolor="#a6003f">Eliminar</th>
        </tr>    

        <% for (let i=0; i < query.length; i++) {%>

        <tr>
            <td><%= query[i].id%></td>
            <td><%= query[i].title%></td>
            <td><%= query[i].artist%></td>
            <td><%= query[i].album%></td>
            <td><%= query[i].genre%></td>
            <td><%= query[i].duration_seconds%></td>
            <td><%= query[i].likes%></td>
            <td><%= query[i].release_date%></td>
            <td><button div="elim" onclick="apagar(`<%= query[i].id %>`)">Eliminar</button></td>
        </tr>

        <script>
            function apagar(id) {

                axios.delete(`/api/songs/${id}`).then(response => {
                    console.log('Success', response.data);
                    location.reload();
                })
                .catch((error) => {
                    console.error('Error:', error);
                });

            }

        </script>

        <% }%>
    </table>
</body>
</html>